<%init>
return unless $Object->isa('RT::Ticket');

# currently not support PriorityAsStringQueues because we had to check
# in which queue the ticket was when this transaction has run
return if defined RT->Config->Get('PriorityAsStringQueues');
return unless defined RT->Config->Get('PriorityAsString');

return unless $Transaction->Type eq 'Set';
my $field = $Transaction->Field || '';
return unless $field =~ /Priority|InitialPriority|FinalPriority/;

my $old_value = $Object->_PriorityAsString($Transaction->OldValue);
my $new_value = $Object->_PriorityAsString($Transaction->NewValue);

$$Description = loc( "[_1] changed from [_2] to [_3]",
    loc($field),
    '<span class="ticket-info-priority ' . lc($old_value) . '">' . loc($old_value) . '</span>',
    '<span class="ticket-info-priority ' . lc($new_value) . '">' . loc($new_value) . '</span>');
</%init>
<%args>
$Object
$Transaction
$Description
</%args>
